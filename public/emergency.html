<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Emergency Admin Access</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      line-height: 1.5;
      margin: 0;
      padding: 20px;
      background-color: #f9fafb;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      padding: 20px;
    }
    h1 {
      color: #e65c00;
      margin-top: 0;
    }
    .alert {
      background-color: #fff3cd;
      color: #664d03;
      padding: 15px;
      border-radius: 4px;
      margin-bottom: 20px;
      border: 1px solid #ffecb5;
    }
    .links {
      margin-top: 30px;
    }
    .link-card {
      background-color: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 4px;
      padding: 15px;
      margin-bottom: 10px;
      display: block;
      color: #333;
      text-decoration: none;
      transition: all 0.2s;
    }
    .link-card:hover {
      background-color: #e9ecef;
      transform: translateY(-2px);
    }
    .link-title {
      font-weight: bold;
      margin-bottom: 5px;
      color: #2563eb;
    }
    .button {
      background-color: #4f46e5;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: background-color 0.2s;
    }
    .button:hover {
      background-color: #4338ca;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Emergency Admin Access</h1>
    
    <div class="alert">
      This page provides direct access to administrative functions and pages when the normal UI is not working properly.
    </div>
    
    <div class="links">
      <h2>Admin Pages</h2>
      <a href="/admin/dashboard" class="link-card">
        <div class="link-title">Dashboard</div>
        <div class="link-desc">Main admin dashboard</div>
      </a>
      
      <a href="/admin/sot-management" class="link-card">
        <div class="link-title">SOT Management</div>
        <div class="link-desc">Manage Source of Truth integration</div>
      </a>
      
      <a href="/admin/inventory" class="link-card">
        <div class="link-title">Site Inventory</div>
        <div class="link-desc">View and manage site inventory snapshots</div>
      </a>

      <a href="/admin/settings" class="link-card">
        <div class="link-title">Settings</div>
        <div class="link-desc">System settings and configuration</div>
      </a>
    </div>
    
    <div class="manual-actions">
      <h2>Manual Actions</h2>
      <div style="margin-bottom: 15px;">
        <button class="button" onclick="triggerSOTCheckin()">Trigger SOT Check-in</button>
        <span id="sot-result" style="margin-left: 10px; font-size: 14px;"></span>
      </div>
      
      <div>
        <button class="button" onclick="generateSiteInventory()">Generate Site Inventory</button>
        <span id="inventory-result" style="margin-left: 10px; font-size: 14px;"></span>
      </div>
    </div>
    
    <p style="margin-top: 30px; color: #6b7280; font-size: 14px; text-align: center;">
      If you're seeing this page, it means normal navigation might be experiencing issues. 
      Use these direct links to access key functionality.
    </p>
  </div>

  <script>
    // SOT Check-in function
    function triggerSOTCheckin() {
      const resultElement = document.getElementById('sot-result');
      resultElement.textContent = 'Triggering check-in...';
      
      fetch('/api/client-check-in/manual', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        }
      })
      .then(response => response.json())
      .then(data => {
        resultElement.textContent = data.success ? '✓ Success' : '✗ Failed';
      })
      .catch(error => {
        resultElement.textContent = '✗ Error: ' + error.message;
      });
    }
    
    // Site Inventory function
    function generateSiteInventory() {
      const resultElement = document.getElementById('inventory-result');
      resultElement.textContent = 'Generating inventory...';
      
      fetch('/api/site-inventory/generate', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        }
      })
      .then(response => response.json())
      .then(data => {
        resultElement.textContent = data.success ? '✓ Success' : '✗ Failed';
      })
      .catch(error => {
        resultElement.textContent = '✗ Error: ' + error.message;
      });
    }
  </script>
</body>
</html>